name: dapr-app-install
version: 0.1.0
description: "Porter installer for a demo Dapr Application"
invocationImage: stevegriffith/dapr-app-install:0.1.0
tag: stevegriffith/dapr-app-bundle:0.1.0
dockerfile: Dockerfile.base

mixins:
  - exec

install:          
  - exec:
      description: "Install Dapr Application Component Specification"
      command: "kubectl"
      arguments:
        - "apply"
        - "-f"
        - "cnab/manifests/node-app-component.yaml"
        - "-f"
        - "cnab/manifests/python-app-component.yaml"
        
  - exec:
      description: "Install Dapr Application Configuration"
      command: "kubectl"
      arguments:
        - "apply"
        - "-f"
        - "cnab/manifests/dapr-demo-app-config.yaml"

upgrade:
  - exec: 
      description: "ToDo"
      command: "echo"
      arguments: 
        - "ToDo" 

uninstall:
  - exec:
      description: "Uninstall Dapr Application Configuration"
      command: "kubectl"
      arguments:
        - "delete"
        - "-f"
        - "cnab/manifests/dapr-demo-app-config.yaml"
        - "-f"
        - "cnab/manifests/node-app-component.yaml"
        - "-f"
        - "cnab/manifests/python-app-component.yaml"        

credentials:
- name: kubeconfig
  path: /root/.kube/config

